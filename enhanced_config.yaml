# enhanced_config.yaml
# å¢å¼ºç‰ˆèŠ‚ç‚¹ç®¡ç†å™¨é…ç½®æ–‡ä»¶
# æ”¯æŒæµ‹é€Ÿã€æµåª’ä½“è§£é”æ£€æµ‹ã€åœ°åŒºè¯†åˆ«ç­‰é«˜çº§åŠŸèƒ½

# åŸºç¡€è®¾ç½®
basic_settings:
  # è¾“å‡ºæ ¼å¼: basic, enhanced, full
  output_format: "enhanced"
  
  # æœ€å¤§å¤„ç†èŠ‚ç‚¹æ•°ï¼ˆæµ‹è¯•è€—æ—¶è€ƒè™‘ï¼‰
  max_nodes: 100
  
  # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
  timeout: 15
  
  # èŠ‚ç‚¹æ’åºæ–¹å¼: ping, speed, country, quality
  sort_by: "quality"  # ç»¼åˆè´¨é‡æ’åº

# æµ‹è¯•é…ç½®
testing:
  # å¯ç”¨çš„æµ‹è¯•æ¨¡å—
  modules:
    connectivity: true      # è¿é€šæ€§æµ‹è¯•
    speed_test: true       # é€Ÿåº¦æµ‹è¯•
    streaming_test: true   # æµåª’ä½“è§£é”æµ‹è¯•
    ip_detection: true     # IPåœ°ç†ä½ç½®æ£€æµ‹
    latency_test: true     # å»¶è¿Ÿæµ‹è¯•
  
  # å¹¶å‘æµ‹è¯•è®¾ç½®
  concurrency:
    max_workers: 3         # æœ€å¤§å¹¶å‘æ•°ï¼ˆé¿å…è¢«é™åˆ¶ï¼‰
    batch_size: 10         # æ‰¹å¤„ç†å¤§å°
    delay_between_batches: 2  # æ‰¹æ¬¡é—´å»¶è¿Ÿï¼ˆç§’ï¼‰
  
  # æµ‹è¯•è¶…æ—¶è®¾ç½®
  timeouts:
    tcp_connect: 10        # TCPè¿æ¥è¶…æ—¶
    http_request: 15       # HTTPè¯·æ±‚è¶…æ—¶
    speed_test: 30         # é€Ÿåº¦æµ‹è¯•è¶…æ—¶
    streaming_test: 20     # æµåª’ä½“æµ‹è¯•è¶…æ—¶

# é€Ÿåº¦æµ‹è¯•é…ç½®
speed_test:
  # æµ‹è¯•æ¨¡å¼: light, standard, full
  mode: "standard"
  
  # æµ‹è¯•æ–‡ä»¶å¤§å°é…ç½®
  test_files:
    small: "1MB"          # å°æ–‡ä»¶æµ‹è¯•
    medium: "5MB"         # ä¸­ç­‰æ–‡ä»¶æµ‹è¯•
    large: "10MB"         # å¤§æ–‡ä»¶æµ‹è¯•ï¼ˆä»…åœ¨fullæ¨¡å¼ï¼‰
  
  # æµ‹è¯•æœåŠ¡å™¨
  test_servers:
    - "https://proof.ovh.net/files/"
    - "http://speedtest.ftp.otenet.gr/files/"
    - "https://mirror.init7.net/speedtest/"
  
  # è´¨é‡è¯„åˆ†æ ‡å‡†
  quality_thresholds:
    excellent: 
      ping: 50           # ms
      speed: 10          # MB/s
    good:
      ping: 150          # ms  
      speed: 5           # MB/s
    acceptable:
      ping: 300          # ms
      speed: 1           # MB/s

# æµåª’ä½“è§£é”æµ‹è¯•é…ç½®
streaming_test:
  # å¯ç”¨çš„æœåŠ¡
  services:
    netflix: true
    disney_plus: true
    youtube_premium: true
    hbo_max: true
    prime_video: true
    bilibili: true        # å“”å“©å“”å“©æ¸¯æ¾³å°
    bahamut: true         # å·´å“ˆå§†ç‰¹åŠ¨ç”»ç–¯
    abema: true           # AbemaTV
    tvb: true             # TVB Anywhere+
    viu: true             # Viu
  
  # æµ‹è¯•åœ°åŒºåå¥½
  region_preference:
    - "HK"  # é¦™æ¸¯
    - "TW"  # å°æ¹¾
    - "JP"  # æ—¥æœ¬
    - "SG"  # æ–°åŠ å¡
    - "US"  # ç¾å›½
  
  # è§£é”çŠ¶æ€æ ‡è®°
  status_indicators:
    full_support: "âœ… å®Œæ•´æ”¯æŒ"
    partial_support: "âš ï¸ éƒ¨åˆ†æ”¯æŒ"
    no_support: "âŒ ä¸æ”¯æŒ"
    test_failed: "â“ æ£€æµ‹å¤±è´¥"
    timeout: "â±ï¸ è¶…æ—¶"

# åœ°åŒºæ£€æµ‹é…ç½®
region_detection:
  # å¯ç”¨IPæ•°æ®åº“
  ip_databases:
    - "ipapi.co"
    - "ip-api.com"
    - "ipinfo.io"
    - "httpbin.org"
  
  # åœ°åŒºæ˜ å°„
  country_mapping:
    # äºšæ´²åœ°åŒº
    HK: "ğŸ‡­ğŸ‡°é¦™æ¸¯"
    TW: "ğŸ‡¹ğŸ‡¼å°æ¹¾" 
    JP: "ğŸ‡¯ğŸ‡µæ—¥æœ¬"
    SG: "ğŸ‡¸ğŸ‡¬æ–°åŠ å¡"
    KR: "ğŸ‡°ğŸ‡·éŸ©å›½"
    MY: "ğŸ‡²ğŸ‡¾é©¬æ¥è¥¿äºš"
    TH: "ğŸ‡¹ğŸ‡­æ³°å›½"
    IN: "ğŸ‡®ğŸ‡³å°åº¦"
    
    # æ¬§ç¾åœ°åŒº
    US: "ğŸ‡ºğŸ‡¸ç¾å›½"
    CA: "ğŸ‡¨ğŸ‡¦åŠ æ‹¿å¤§"
    GB: "ğŸ‡¬ğŸ‡§è‹±å›½"
    DE: "ğŸ‡©ğŸ‡ªå¾·å›½"
    FR: "ğŸ‡«ğŸ‡·æ³•å›½"
    NL: "ğŸ‡³ğŸ‡±è·å…°"
    RU: "ğŸ‡·ğŸ‡ºä¿„ç½—æ–¯"
    
    # å…¶ä»–åœ°åŒº
    AU: "ğŸ‡¦ğŸ‡ºæ¾³æ´²"
    BR: "ğŸ‡§ğŸ‡·å·´è¥¿"
    TR: "ğŸ‡¹ğŸ‡·åœŸè€³å…¶"
  
  # åœ°åŒºå…³é”®è¯æ£€æµ‹
  keywords:
    HK: ["hk", "hong-kong", "hongkong", "é¦™æ¸¯", "hkg", "852"]
    TW: ["tw", "taiwan", "taipei", "å°æ¹¾", "å°åŒ—", "tpe", "886"]
    JP: ["jp", "japan", "tokyo", "osaka", "æ—¥æœ¬", "ä¸œäº¬", "nrt", "kix", "81"]
    SG: ["sg", "singapore", "æ–°åŠ å¡", "sin", "65"]
    US: ["us", "usa", "america", "united-states", "ç¾å›½", "çº½çº¦", "æ´›æ‰çŸ¶", "1"]

# èŠ‚ç‚¹å‘½åè§„åˆ™
naming:
  # å‘½åæ¨¡æ¿: {region} {name} {quality} {index}
  template: "[{ping}ms] {region} {name} {index:02d}"
  
  # è´¨é‡æ ‡è¯†
  quality_tags:
    excellent: "âš¡"
    good: "ğŸš€" 
    acceptable: "ğŸ“¶"
    poor: "ğŸŒ"
  
  # ç‰¹æ®Šæ ‡è®°
  special_tags:
    netflix: "ğŸ¬"
    disney: "ğŸ°"
    streaming: "ğŸ“º"
    gaming: "ğŸ®"
    ai: "ğŸ¤–"

# è¾“å‡ºé…ç½®
output:
  # Clashé…ç½®å¢å¼º
  clash:
    # è‡ªåŠ¨ç”Ÿæˆä»£ç†ç»„
    auto_groups: true
    
    # ä»£ç†ç»„é…ç½®
    proxy_groups:
      - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
        type: "select" 
        include_auto: true
        include_fallback: true
        max_proxies: 20
      
      - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
        type: "url-test"
        test_url: "http://www.gstatic.com/generate_204"
        interval: 300
        tolerance: 50
      
      - name: "ğŸ”¯ æ•…éšœè½¬ç§»"
        type: "fallback"
        test_url: "http://www.gstatic.com/generate_204"
        interval: 300
      
      - name: "ğŸ¬ æµåª’ä½“"
        type: "select"
        filter: "netflix|disney|hbo"
      
      - name: "ğŸ® æ¸¸æˆåŠ é€Ÿ"
        type: "select"
        filter: "gaming|game"
        sort_by: "ping"
    
    # åœ°åŒºåˆ†ç»„
    region_groups:
      enable: true
      min_nodes: 2          # æœ€å°‘èŠ‚ç‚¹æ•°æ‰åˆ›å»ºåˆ†ç»„
      auto_fallback: true   # è‡ªåŠ¨æ·»åŠ æ•…éšœè½¬ç§»
  
  # è®¢é˜…é“¾æ¥å¢å¼º
  subscription:
    # æ·»åŠ èŠ‚ç‚¹æ ‡ç­¾
    add_tags: true
    
    # æŒ‰è´¨é‡æ’åº
    sort_by_quality: true
    
    # è¿‡æ»¤ä½è´¨é‡èŠ‚ç‚¹
    filter_poor_nodes: true
    
    # æœ€å¤§èŠ‚ç‚¹æ•°
    max_nodes: 200

# ç›‘æ§å’Œé€šçŸ¥
monitoring:
  # å¯ç”¨å¥åº·æ£€æŸ¥
  health_check: true
  
  # æ£€æŸ¥é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
  check_interval: 60
  
  # å‘Šè­¦é˜ˆå€¼
  alert_thresholds:
    min_alive_rate: 70     # æœ€ä½å­˜æ´»ç‡ (%)
    max_avg_ping: 500      # æœ€å¤§å¹³å‡å»¶è¿Ÿ (ms)
    min_avg_speed: 1       # æœ€ä½å¹³å‡é€Ÿåº¦ (MB/s)
  
  # é€šçŸ¥æ¸ é“
  notifications:
    webhook:
      enabled: false
      url: ""              # Webhookåœ°å€
    
    telegram:
      enabled: false
      bot_token: ""        # Bot Token
      chat_id: ""          # èŠå¤©ID
    
    email:
      enabled: false
      smtp_server: ""
      username: ""
      password: ""
      recipients: []

# GitHub Actionsç‰¹æ®Šé…ç½®
github_actions:
  # å·¥ä½œæµä¼˜åŒ–
  workflow:
    # ç¼“å­˜è®¾ç½®
    enable_cache: true
    cache_duration: "1h"
    
    # å¹¶å‘é™åˆ¶ï¼ˆé¿å…èµ„æºè€—å°½ï¼‰
    max_concurrent_jobs: 2
    
    # å¤±è´¥é‡è¯•
    retry_on_failure: true
    max_retries: 2
  
  # éƒ¨ç½²è®¾ç½®
  deployment:
    # è‡ªåŠ¨éƒ¨ç½²åˆ°GitHub Pages
    auto_deploy: true
    
    # ä¿ç•™æ–‡ä»¶ç‰ˆæœ¬æ•°
    keep_versions: 5
    
    # ç”Ÿæˆç›‘æ§é¡µé¢
    generate_dashboard: true
    
    # åˆ›å»ºAPIæ¥å£
    create_api: true

# é«˜çº§è¿‡æ»¤è§„åˆ™
filtering:
  # èŠ‚ç‚¹åç§°è¿‡æ»¤
  name_filters:
    exclude_keywords:
      - "å‰©ä½™"
      - "åˆ°æœŸ"
      - "å®˜ç½‘"
      - "æµ‹è¯•"
      - "æµé‡"
      - "é‡ç½®"
      - "QQç¾¤"
      - "TGç¾¤"
    
    include_keywords:
      - "Premium"
      - "Pro"
      - "Plus"
      - "VIP"
  
  # æœåŠ¡å™¨è¿‡æ»¤
  server_filters:
    # æ’é™¤çš„IPæ®µ
    exclude_cidrs:
      - "192.168.0.0/16"   # ç§æœ‰åœ°å€
      - "10.0.0.0/8"       # ç§æœ‰åœ°å€
      - "172.16.0.0/12"    # ç§æœ‰åœ°å€
    
    # æ’é™¤çš„ç«¯å£
    exclude_ports:
      - 22                 # SSH
      - 3389               # RDP
      - 1080               # SOCKS
  
  # è´¨é‡è¿‡æ»¤
  quality_filters:
    # æœ€å°è¦æ±‚
    min_requirements:
      ping: 1000           # æœ€å¤§å»¶è¿Ÿ (ms)
      success_rate: 50     # æœ€ä½æˆåŠŸç‡ (%)
      speed: 0.1           # æœ€ä½é€Ÿåº¦ (MB/s)
    
    # è‡ªåŠ¨æ·˜æ±°è§„åˆ™
    auto_removal:
      consecutive_failures: 3   # è¿ç»­å¤±è´¥æ¬¡æ•°
      low_speed_threshold: 0.05 # ä½é€Ÿé˜ˆå€¼ (MB/s)

# å®éªŒæ€§åŠŸèƒ½
experimental:
  # AIæ™ºèƒ½ä¼˜åŒ–
  ai_optimization:
    enabled: false
    model: "simple"      # simple, advanced
    
  # æœºå™¨å­¦ä¹ èŠ‚ç‚¹è´¨é‡é¢„æµ‹
  ml_prediction:
    enabled: false
    training_data_days: 7
    
  # è‡ªé€‚åº”æµ‹è¯•é¢‘ç‡
  adaptive_testing:
    enabled: false
    base_interval: 4     # å°æ—¶
    quality_factor: true # æ ¹æ®è´¨é‡è°ƒæ•´é¢‘ç‡
